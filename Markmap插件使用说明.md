# 🧠 虎鲸笔记 Markmap 思维导图插件

## 📖 插件简介

这是一个完全移植自 Logseq Markmap 插件的虎鲸笔记思维导图插件，将虎鲸笔记的层级结构转换为交互式的思维导图，就像在 Logseq 中一样方便。

## ✨ 核心特性

### 🎯 节点级转换
- **悬停显示**：鼠标悬停在任意笔记块上时，左侧显示🧠图标
- **一键生成**：点击图标即可将该块及其子块转换为思维导图
- **实时预览**：在右侧面板中显示交互式思维导图

### 🎨 交互功能
- **缩放平移**：支持鼠标拖拽和滚轮缩放
- **节点展开**：点击节点可展开/折叠子分支
- **自动布局**：智能排列节点，避免重叠
- **平滑动画**：800ms过渡动画，体验流畅

### 🔧 多种触发方式
1. **节点悬停**：悬停显示🧠图标，点击转换
2. **工具栏按钮**：点击顶部工具栏的脑图图标
3. **快捷键**：`Ctrl+Shift+M` 快速转换当前块
4. **命令面板**：搜索"创建思维导图"命令

### 🎨 自定义功能
- **主题适配**：自动适配虎鲸笔记明暗主题
- **导出功能**：支持导出SVG格式的思维导图
- **刷新更新**：内容变更后可一键刷新视图

## 🚀 使用方法

### 方式一：节点悬停（推荐）
1. 将鼠标悬停在任意笔记块上
2. 左侧会显示🧠图标（半透明 → 高亮）
3. 点击图标生成该块的思维导图

### 方式二：工具栏按钮
1. 点击顶部工具栏的🧠图标
2. 自动转换当前选中或第一个块

### 方式三：快捷键
1. 按下 `Ctrl+Shift+M`
2. 快速生成当前块的思维导图

### 方式四：命令面板
1. 打开命令面板
2. 搜索"创建思维导图"
3. 选择执行命令

## 🎮 思维导图操作

### 基础操作
- **拖拽**：按住并拖动可平移视图
- **缩放**：鼠标滚轮缩放，或触板手势
- **节点点击**：点击节点可展开/折叠子分支
- **自适应**：思维导图会自动调整到最佳显示尺寸

### 控制按钮
- **🔄 刷新**：重新生成思维导图（内容变更后使用）
- **📄 导出SVG**：保存思维导图为SVG格式文件

## 🔧 技术特性

### 智能转换
- **层级保持**：完美保持虎鲸笔记的层级结构
- **文本处理**：自动处理长文本，避免显示问题
- **结构优化**：最多6级标题层级，适配思维导图显示

### 性能优化
- **按需加载**：Markmap库动态加载，不影响启动速度
- **内存管理**：面板关闭时自动清理资源
- **多实例**：支持同时打开多个思维导图

### 兼容性
- **CDN加载**：使用 jsdelivr CDN，确保库文件可用性
- **错误处理**：完善的错误提示和容错机制
- **主题同步**：自动适配虎鲸笔记的明暗主题切换

## 🎯 使用场景

### 📝 内容创作
- **文章大纲**：将文章结构可视化为思维导图
- **演讲稿**：快速预览演讲内容的逻辑脉络
- **项目规划**：可视化项目任务和里程碑

### 📚 学习笔记
- **知识图谱**：将学习内容转换为知识关系图
- **复习总结**：快速回顾章节内容的重点脉络
- **概念梳理**：理清复杂概念间的层级关系

### 💼 工作协作
- **会议记录**：将讨论要点可视化展示
- **流程梳理**：清晰展现工作流程步骤
- **决策分析**：可视化决策树和选项分析

## 🔧 安装配置

### 系统要求
- 虎鲸笔记 1.5.0 或更高版本
- 支持现代浏览器（Chrome、Safari、Firefox、Edge）
- 良好的网络连接（首次使用需下载Markmap库）

### 安装步骤
1. 将插件文件复制到虎鲸笔记插件目录
2. 重启虎鲸笔记应用
3. 在插件管理中启用"Markmap思维导图"
4. 首次使用时会自动下载所需组件

### 权限说明
- `read-blocks`：读取笔记块数据用于生成思维导图
- `write-ui`：创建思维导图界面和控制按钮
- `store-data`：保存插件配置和状态信息

## 🐛 常见问题

### Q: 点击图标没有反应？
**A**: 检查网络连接，首次使用需要下载Markmap组件。查看浏览器控制台是否有错误信息。

### Q: 思维导图显示不完整？
**A**: 点击"🔄 刷新"按钮重新生成，或检查原始笔记内容是否有特殊字符。

### Q: 如何导出思维导图？
**A**: 在思维导图面板中点击"📄 导出SVG"按钮，会自动下载SVG格式文件。

### Q: 快捷键不生效？
**A**: 确认插件已启用，快捷键为 `Ctrl+Shift+M`（Mac上为 `Cmd+Shift+M`）。

### Q: 思维导图太小看不清？
**A**: 使用鼠标滚轮放大，或拖拽调整视图位置。思维导图支持无限缩放。

## 🆚 与 Logseq 对比

| 功能 | 虎鲸笔记 Markmap | Logseq Markmap |
|------|-----------------|----------------|
| 节点悬停转换 | ✅ | ❌ |
| 工具栏集成 | ✅ | ✅ |
| 快捷键支持 | ✅ | ✅ |
| SVG导出 | ✅ | ✅ |
| 多实例支持 | ✅ | ✅ |
| 主题适配 | ✅ | ✅ |
| 块级转换 | ✅ | ✅ |
| 页面级转换 | 🔄 规划中 | ✅ |

## 🔮 未来规划

- [ ] 页面级思维导图转换
- [ ] 更多导出格式（PNG、PDF）
- [ ] 自定义主题配色
- [ ] 节点样式配置
- [ ] 批量转换功能

## 📞 技术支持

如需帮助或反馈：
1. 检查浏览器控制台错误信息
2. 确认网络连接正常
3. 尝试重启虎鲸笔记应用
4. 联系开发团队获取支持

---

**享受思维导图带来的清晰思考体验！** 🎉✨